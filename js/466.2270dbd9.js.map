{"version":3,"file":"js/466.2270dbd9.js","mappings":"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","sources":["webpack://vue_dreamfactory/./src/views/upload/Index.vue","webpack://vue_dreamfactory/./src/views/upload/Index.vue?29b6"],"sourcesContent":["<template>\r\n  <v-container>\r\n    <v-card id=\"drop-area\"\r\n            flat>\r\n      <v-card-title class=\"text-center\">\r\n        上传游戏配置文件\r\n      </v-card-title>\r\n      <v-divider></v-divider>\r\n      <v-card-text>\r\n        <input v-show=\"false\"\r\n               ref=\"fileinput\"\r\n               @change=\"changeFile\"\r\n               type=\"file\"\r\n               multiple=\"multiple\" />\r\n        <v-card id=\"drop-area\"\r\n                @click=\"selectFile\"\r\n                variant=\"outlined\"\r\n                height=\"220\">\r\n          <v-card-text>\r\n            <v-row justify=\"center\"\r\n                   dense>\r\n              <v-col cols=\"12\"\r\n                     class=\"text-center\">\r\n                <v-icon size=\"120\">mdi-cloud-upload</v-icon>\r\n              </v-col>\r\n              <v-col cols=\"12\"\r\n                     class=\"text-center\">将文件拖到此处，或<strong class=\"blue--text text--lighten-1\">点击上传</strong>\r\n              </v-col>\r\n              <v-col cols=\"12\"\r\n                     class=\"text-center\">只能上传 .json 格式的文件</v-col>\r\n            </v-row>\r\n          </v-card-text>\r\n        </v-card>\r\n        <v-card variant=\"outlined\"\r\n                class=\"mt-5\">\r\n          <v-card-title>文件列表</v-card-title>\r\n          <v-card-text>\r\n            <v-row>\r\n              <v-col cols=\"12\"\r\n                     v-for=\"(file,i) in files\"\r\n                     :key=\"i\">\r\n                <v-card>\r\n                  <v-card-text class=\"pa-0 \">\r\n                    <v-row>\r\n                      <v-col cols=\"10\">{{file.title}}</v-col>\r\n                      <v-col cols=\"2\"\r\n                             class=\"d-flex justify-end\">\r\n                        <v-btn variant=\"outlined\"\r\n                               size=\"x-small\"\r\n                               icon\r\n                               @click=\"removefile(i)\">\r\n                          <v-icon>\r\n                            mdi-close-circle\r\n                          </v-icon>\r\n                        </v-btn>\r\n                      </v-col>\r\n                    </v-row>\r\n                  </v-card-text>\r\n                </v-card>\r\n              </v-col>\r\n            </v-row>\r\n          </v-card-text>\r\n          <v-card-actions>\r\n            <v-row justify=\"center\">\r\n              <v-col cols=\"5\">\r\n                <v-btn variant=\"flat\"\r\n                       color=\"secondary\"\r\n                       :disabled=\"files.length == 0\"\r\n                       :loading=\"uploading\"\r\n                       @click=\"uploadres\"\r\n                       block>提交</v-btn>\r\n              </v-col>\r\n            </v-row>\r\n          </v-card-actions>\r\n        </v-card>\r\n      </v-card-text>\r\n    </v-card>\r\n    <v-snackbar v-model=\"snackbar\"\r\n                :timeout=\"2000\">\r\n      {{ errstr }}\r\n\r\n      <template v-slot:action=\"{ attrs }\">\r\n        <v-btn color=\"blue\"\r\n               text\r\n               v-bind=\"attrs\"\r\n               @click=\"snackbar = false\">\r\n          Close\r\n        </v-btn>\r\n      </template>\r\n    </v-snackbar>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { uploadformData } from '@/utils/upload'\r\nexport default {\r\n  name: 'upload',\r\n  data() {\r\n    return {\r\n      errstr: '',\r\n      snackbar: false,\r\n      files: [],\r\n      dialog: false,\r\n      uploading: false,\r\n      uploadprogress: 0,\r\n    }\r\n  },\r\n  methods: {\r\n    // 选择文件\r\n    changeFile(e) {\r\n      let suffixs = ['json']\r\n      console.log('suffixs:%o', suffixs)\r\n\r\n      for (let file of e.target.files) {\r\n        let filename = file.name\r\n        let isallow = false\r\n        //获取文件的后缀名的位置\r\n        var index = filename.lastIndexOf('.')\r\n        if (index == -1) {\r\n          this.$refs.fileinput.value = null\r\n\r\n          this.errstr = '目标文件格式不符合规范!'\r\n          this.snackbar = true\r\n          return\r\n        }\r\n        //截取后缀名\r\n        var suffix = filename.substring(index + 1)\r\n\r\n        for (var i = 0; i < suffixs.length; i++) {\r\n          if (suffix == suffixs[i]) {\r\n            isallow = true\r\n            break\r\n          }\r\n        }\r\n        if (!isallow) {\r\n          this.$refs.fileinput.value = null\r\n          this.errstr = '目标文件格式不符合规范!'\r\n          this.snackbar = true\r\n          return\r\n        }\r\n        this.files.push({\r\n          file: file,\r\n          title: file.name,\r\n        })\r\n      }\r\n      this.$refs.fileinput.value = null\r\n    },\r\n    selectFile() {\r\n      this.$refs.fileinput.dispatchEvent(new MouseEvent('click'))\r\n    },\r\n    removefile(i) {\r\n      this.files.forEach(function (item, index, arr) {\r\n        if (index == i) {\r\n          arr.splice(index, 1)\r\n        }\r\n      })\r\n    },\r\n    uploadres() {\r\n      this.uploading = true\r\n      var formData = new FormData()\r\n      for (let i = 0; i < this.files.length; ++i) {\r\n        formData.append('file_' + i, this.files[i].file)\r\n      }\r\n      formData.append('filenum', this.files.length)\r\n      uploadformData('/upload', formData, (p) => {\r\n        this.uploadprogress = p\r\n      })\r\n        .then((resp) => {\r\n          this.uploading = false\r\n          this.errstr = '文件上传成功!'\r\n          this.snackbar = true\r\n          this.files = []\r\n          console.log('uploadformData 文件上传成功')\r\n          this.$forceUpdate()\r\n        })\r\n        .catch((err) => {\r\n          this.uploading = false\r\n          this.errstr = err.message\r\n          this.snackbar = true\r\n          console.log('uploadformData 文件上传失败 err:%o', err)\r\n        })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>","import { render } from \"./Index.vue?vue&type=template&id=50bafbdb\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"E:\\\\vue\\\\vue_dreamfactory\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","_createBlock","_component_v_container","_createVNode","_component_v_card","id","flat","_component_v_card_title","_component_v_divider","_component_v_card_text","ref","onChange","$options","type","multiple","onClick","variant","height","_component_v_row","justify","dense","_component_v_col","cols","_component_v_icon","size","_createElementBlock","_Fragment","_renderList","$data","file","i","key","title","_component_v_btn","icon","_component_v_card_actions","color","disabled","length","loading","block","_component_v_snackbar","$event","timeout","action","attrs","text","name","data","errstr","snackbar","files","dialog","uploading","uploadprogress","methods","changeFile","e","suffixs","console","log","target","filename","isallow","index","lastIndexOf","this","$refs","fileinput","value","suffix","substring","push","selectFile","dispatchEvent","MouseEvent","removefile","forEach","item","arr","splice","uploadres","formData","FormData","append","uploadformData","p","then","resp","$forceUpdate","catch","err","message","__exports__","render"],"sourceRoot":""}